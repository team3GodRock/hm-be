<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header" />
<body>

<div class="container">
    <div th:replace="fragments/bodyHeader :: bodyHeader"/>

    <h2>인물 선택</h2>
    <form id="personForm" onsubmit="return goToEditPage()">
        <div class="form-group">
            <label for="person">인물 선택</label>
            <select id="person" name="personId" class="form-control" required>
                <option value="">인물을 선택하세요</option>
                <option th:each="person : ${people}" th:value="${person.id}" th:text="${person.name}"></option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary mt-2">공약 수정 페이지로 이동</button>
    </form>

    <script>
        function goToEditPage() {
            const personId = document.getElementById("person").value;
            if (!personId) {
                alert("인물을 선택하세요!");
                return false; // 폼 제출 중단
            }
            window.location.href = `/admin/promise/edit/${personId}`;
            return false; // 폼 제출 중단
        }
    </script>

    <div th:replace="fragments/footer :: footer" />
</div>

</body>
</html>
